<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-Driver Validation: USB Compliance Tests</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><a href="https://www.keil.arm.com/cmsis" target="_blank"><img alt="Logo" src="cmsis_logo_white_small.png"/</a></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-Driver Validation
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "CMSIS-Driver Validation");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">Driver Validation</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__usbd__comp__test.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">USB Compliance Tests<div class="ingroups"><a class="el" href="group__dv__usbd.html">USB Device Validation</a></div></div></div>
</div><!--header-->
<div class="contents">
<p>USB drivers need to be tested against the requirements of the USB standard. The following tools are provided by the <a href="http://www.usb.org" target="_blank">USB Implementers Forum</a>:</p><ul>
<li><a href="http://www.usb.org/developers/tools/usb20_tools/" target="_blank">USB Command Verifier (USB20CV Tools)</a> for USB 2.0 controllers</li>
<li><a href="http://www.usb.org/developers/tools/" target="_blank">USB Command Verifier (USB3CV Tools)</a> for USB 3 controllers</li>
</ul>
<p>Before using the command verifier tools, make sure that you have an application running with the USB device class that you are going to test. For example, if you want to test the behavior of the USB MSC device class, create a ÂµVision project containing this class. For more information, refer to the <a href="https://arm-software.github.io/MDK-Middleware/latest/USB/usbd_create_app.html" target="_blank">MDK Middleware</a> documentation.</p>
<p>Then, follow these steps to run the verification tools on a Windows PC:</p>
<ul>
<li>Install the appropriate USB Command Verifier tool and reboot your PC.</li>
<li>Connect your device to the PC.</li>
<li>Open the Windows Device Manager and select <b>View - Devices by connection</b> to view the USB host controllers available on the PC:</li>
</ul>
<div class="image">
<img src="usbd_dev_manager.png" alt=""/>
<div class="caption">
Select USB Device</div></div>
<ul>
<li>Expand the entry and verify the controller properties to which your device is connected. Remember the location of the controller that will be tested:</li>
</ul>
<div class="image">
<img src="usbd_dev_location.png" alt=""/>
<div class="caption">
Device Location</div></div>
<ul>
<li>Run the USB Command Verifier tool and select the controller according to the location found in the previous step:</li>
</ul>
<div class="image">
<img src="usbd_select_device.png" alt=""/>
<div class="caption">
Select Controller</div></div>
<dl class="section note"><dt>Note</dt><dd>Do not test the controller that is connected to the keyboard or mouse. All devices connected to the tested controller will stop working.</dd></dl>
<ul>
<li>When selecting the <b>Compliance Test</b> mode all test cases will run. In the <b>Debug</b> mode, you can choose individual test cases by selecting the related check boxes. Test reports are saved automatically in the <b>Reports</b> directory.</li>
</ul>
<div class="image">
<img src="usbd_command_verifier.png" alt=""/>
<div class="caption">
Compliance Tests</div></div>
<p> The following tests should be executed for:</p><ul>
<li>USB Mass Storage Class: Chapter 9 Tests + MSC Tests</li>
<li>USB HID class: Chapter 9 Tests + HID Tests</li>
<li>Any other class (CDC, ADC, etc.): only Chapter 9 Tests</li>
</ul>
<p><b>Chapter 9 Tests</b> refers to the USB Device Framework chapter of the USB specification. Every USB peripheral is required conform to this test which must be passed. Passed tests offer a good level of confidence that there are no major flows in the USB device drivers.</p>
<p>The USB Command Verifier does not test how well a device behaves under stress. To get a better confidence, conduct stress tests of all available examples:</p><ul>
<li>USB MSC: Send a long file to the mass storage device and read it back and compare the output.</li>
<li>USB HID: Use the HID Client (available in the MDK installation directory below \ARM\Utilities\HID_Client\Release) to see how the device works under stress.</li>
<li>USB CDC (Virtual COM): Send a large file on the Virtual COM Port and capture it on the UART and vice versa. Compare sent and received files for both directions.</li>
<li>USB ADC: Play a sound file form the board for some time and listen for any sound distortion. Record sounds coming from a microphone and verify the recorded file on the USB Host.</li>
</ul>
<p>After the completion of the tests, click <b>Exit</b> to switch back the USB stack. Otherwise, the USB stack will stay in test mode. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
